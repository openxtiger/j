<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jspp/src/j/junit/MixedCollection.js - The Js++ Language</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png">The Js++ Language: jspp/src/j/junit/MixedCollection.js</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Modules</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../modules/DOM_UNIT.html">DOM_UNIT</a>
                
                </li>
            
                <li><a href="../modules/jui.html">jui</a>
                
                </li>
            
                <li><a href="../modules/junit.html">junit</a>
                
                </li>
            
                <li><a href="../modules/OOP.html">OOP</a>
                
                </li>
            
        </ul>
    </div>
</div>

<div id="classes" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Classes</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../classes/dataview.html">dataview</a></li>
            
                <li><a href="../classes/Jclass.html">Jclass</a></li>
            
                <li><a href="../classes/jde.DataProxy.html">jde.DataProxy</a></li>
            
                <li><a href="../classes/jde.JsonReader.html">jde.JsonReader</a></li>
            
                <li><a href="../classes/JDEngine.html">JDEngine</a></li>
            
                <li><a href="../classes/jdengine.html">jdengine</a></li>
            
                <li><a href="../classes/jsonreader.html">jsonreader</a></li>
            
                <li><a href="../classes/jui.Component.html">jui.Component</a></li>
            
                <li><a href="../classes/jui.DataView.html">jui.DataView</a></li>
            
                <li><a href="../classes/jui.form.Checkbox.html">jui.form.Checkbox</a></li>
            
                <li><a href="../classes/jui.form.ComboBox.html">jui.form.ComboBox</a></li>
            
                <li><a href="../classes/jui.form.Field.html">jui.form.Field</a></li>
            
                <li><a href="../classes/jui.form.Hidden.html">jui.form.Hidden</a></li>
            
                <li><a href="../classes/jui.form.NumberFiled.html">jui.form.NumberFiled</a></li>
            
                <li><a href="../classes/jui.form.Radio.html">jui.form.Radio</a></li>
            
                <li><a href="../classes/jui.form.TextArea.html">jui.form.TextArea</a></li>
            
                <li><a href="../classes/jui.form.TextField.html">jui.form.TextField</a></li>
            
                <li><a href="../classes/jui.form.TriggerField.html">jui.form.TriggerField</a></li>
            
                <li><a href="../classes/jui.form.TwinTriggerField.html">jui.form.TwinTriggerField</a></li>
            
                <li><a href="../classes/jui.Layer.html">jui.Layer</a></li>
            
                <li><a href="../classes/junit.BaseTemplate.html">junit.BaseTemplate</a></li>
            
                <li><a href="../classes/junit.JTemplate.html">junit.JTemplate</a></li>
            
                <li><a href="../classes/junit.MixedCollection.html">junit.MixedCollection</a></li>
            
                <li><a href="../classes/junit.Observable.html">junit.Observable</a></li>
            
                <li><a href="../classes/junit.STemplate.html">junit.STemplate</a></li>
            
                <li><a href="../classes/junit.Template.html">junit.Template</a></li>
            
                <li><a href="../classes/Opp.html">Opp</a></li>
            
        </ul>
    </div>
</div>










<div id="fileTree" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Files</h2>
    </div>
    <div class="bd">
        <ul><li>jspp/<ul><li>src/<ul><li>core/<ul><li><a href="../files/jspp_src_core_j.js.html">j.js</a></li><li><a href="../files/jspp_src_core_oop.js.html">oop.js</a></li></ul></li><li>j/<ul><li>jde/<ul><li><a href="../files/jspp_src_j_jde_DataProxy.js.html">DataProxy.js</a></li><li><a href="../files/jspp_src_j_jde_JDEngine.js.html">JDEngine.js</a></li><li><a href="../files/jspp_src_j_jde_JsonReader.js.html">JsonReader.js</a></li></ul></li><li>jui/<ul><li><a href="../files/jspp_src_j_jui_Component.js.html">Component.js</a></li><li><a href="../files/jspp_src_j_jui_DataView.js.html">DataView.js</a></li><li><a href="../files/jspp_src_j_jui_Layer.js.html">Layer.js</a></li><li>form/<ul><li><a href="../files/jspp_src_j_jui_form_Checkbox.js.html">Checkbox.js</a></li><li><a href="../files/jspp_src_j_jui_form_ComboBox.js.html">ComboBox.js</a></li><li><a href="../files/jspp_src_j_jui_form_Field.js.html">Field.js</a></li><li><a href="../files/jspp_src_j_jui_form_Hidden.js.html">Hidden.js</a></li><li><a href="../files/jspp_src_j_jui_form_NumberField.js.html">NumberField.js</a></li><li><a href="../files/jspp_src_j_jui_form_Radio.js.html">Radio.js</a></li><li><a href="../files/jspp_src_j_jui_form_TextArea.js.html">TextArea.js</a></li><li><a href="../files/jspp_src_j_jui_form_TextField.js.html">TextField.js</a></li><li><a href="../files/jspp_src_j_jui_form_TriggerField.js.html">TriggerField.js</a></li></ul></li></ul></li><li>junit/<ul><li><a href="../files/jspp_src_j_junit_MixedCollection.js.html">MixedCollection.js</a></li><li><a href="../files/jspp_src_j_junit_Observable.js.html">Observable.js</a></li><li><a href="../files/jspp_src_j_junit_Template.js.html">Template.js</a></li><li><a href="../files/jspp_src_j_junit_XTemplate.js.html">XTemplate.js</a></li></ul></li></ul></li></ul></li></ul></li></ul>
    </div>
</div>



        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>jspp/src/j/junit/MixedCollection.js</h4>

<pre class="code prettyprint linenums">
/**
 * @package junit
 * @module junit
 */
&#x27;package junit&#x27;.j(function () {

    /**
     * @class junit.MixedCollection
     * @implements junit.Observable
     */
    &#x27;class MixedCollection implements Observable&#x27;.j(function (jsuper, ob) {

        function _sort(property, dir, fn) {
            var i, len,
                dsc = String(dir).toUpperCase() == &#x27;DESC&#x27; ? -1 : 1,

            //this is a temporary array used to apply the sorting function
                c = [],
                keys = this.keys,
                items = this.items;

            //default to a simple sorter function if one is not provided
            fn = fn || function (a, b) {
                return a - b;
            };

            //copy all the items into a temporary array, which we will sort
            for (i = 0, len = items.length; i &lt; len; i++) {
                c[c.length] = {
                    key: keys[i],
                    value: items[i],
                    index: i
                };
            }

            //sort the temporary array
            c.sort(function (a, b) {
                var v = fn(a[property], b[property]) * dsc;
                if (v === 0) {
                    v = (a.index &lt; b.index ? -1 : 1);
                }
                return v;
            });

            //copy the temporary array back into the main this.items and this.keys objects
            for (i = 0, len = c.length; i &lt; len; i++) {
                items[i] = c[i].value;
                keys[i] = c[i].key;
            }

            this.fireEvent(&#x27;sort&#x27;, this);
        }

        jprotected({
            allowFunctions: false
        });

        jpublic({
            /**
             * @constructor
             * @param allowFunctions
             * @param keyFn
             */
            constructor: function (allowFunctions, keyFn) {
                jcall(ob, this);

                this.allowFunctions = allowFunctions === true;
                if (keyFn) {
                    this.getKey = keyFn;
                }

                var me = this;

                me.addEvents(&#x27;clear&#x27;, &#x27;add&#x27;, &#x27;replace&#x27;, &#x27;remove&#x27;, &#x27;sort&#x27;);

                me.items = [];
                me.map = {};
                me.keys = [];
                me.length = 0;
            },

            getKey: function (o) {
                return o.id;
            },
            add: function (key, o) {
                if (arguments.length == 1) {
                    o = arguments[0];
                    key = this.getKey(o);
                }
                if (typeof key != &#x27;undefined&#x27; &amp;&amp; key !== null) {
                    var old = this.map[key];
                    if (typeof old != &#x27;undefined&#x27;) {
                        return this.replace(key, o);
                    }
                    this.map[key] = o;
                }
                this.length++;
                this.items.push(o);
                this.keys.push(key);
                this.fireEvent(&#x27;add&#x27;, this.length - 1, o, key);
                return o;
            },
            replace: function (key, o) {
                if (arguments.length == 1) {
                    o = arguments[0];
                    key = this.getKey(o);
                }
                var old = this.map[key];
                if (typeof key == &#x27;undefined&#x27; || key === null || typeof old == &#x27;undefined&#x27;) {
                    return this.add(key, o);
                }
                var index = this.indexOfKey(key);
                this.items[index] = o;
                this.map[key] = o;
                this.fireEvent(&#x27;replace&#x27;, key, old, o);
                return o;
            },
            addAll: function (objs) {
                if (arguments.length &gt; 1 || $.isArray(objs)) {
                    var args = arguments.length &gt; 1 ? arguments : objs;
                    for (var i = 0, len = args.length; i &lt; len; i++) {
                        this.add(args[i]);
                    }
                } else {
                    for (var key in objs) {
                        if (this.allowFunctions || typeof objs[key] != &#x27;function&#x27;) {
                            this.add(key, objs[key]);
                        }
                    }
                }
            },
            each: function (fn, scope) {
                var items = [].concat(this.items); // each safe for removal
                for (var i = 0, len = items.length; i &lt; len; i++) {
                    if (fn.call(scope || items[i], items[i], i, len) === false) {
                        break;
                    }
                }
            },
            eachKey: function (fn, scope) {
                for (var i = 0, len = this.keys.length; i &lt; len; i++) {
                    fn.call(scope || window, this.keys[i], this.items[i], i, len);
                }
            },
            find: function (fn, scope) {
                for (var i = 0, len = this.items.length; i &lt; len; i++) {
                    if (fn.call(scope || window, this.items[i], this.keys[i])) {
                        return this.items[i];
                    }
                }
                return null;
            },
            insert: function (index, key, o) {
                if (arguments.length == 2) {
                    o = arguments[1];
                    key = this.getKey(o);
                }
                if (this.containsKey(key)) {
                    this.suspendEvents();
                    this.removeKey(key);
                    this.resumeEvents();
                }
                if (index &gt;= this.length) {
                    return this.add(key, o);
                }
                this.length++;
                this.items.splice(index, 0, o);
                if (typeof key != &#x27;undefined&#x27; &amp;&amp; key !== null) {
                    this.map[key] = o;
                }
                this.keys.splice(index, 0, key);
                this.fireEvent(&#x27;add&#x27;, index, o, key);
                return o;
            },
            remove: function (o) {
                return this.removeAt(this.indexOf(o));
            },
            removeAt: function (index) {
                if (index &lt; this.length &amp;&amp; index &gt;= 0) {
                    this.length--;
                    var o = this.items[index];
                    this.items.splice(index, 1);
                    var key = this.keys[index];
                    if (typeof key != &#x27;undefined&#x27;) {
                        delete this.map[key];
                    }
                    this.keys.splice(index, 1);
                    this.fireEvent(&#x27;remove&#x27;, o, key);
                    return o;
                }
                return false;
            },
            removeKey: function (key) {
                return this.removeAt(this.indexOfKey(key));
            },
            getCount: function () {
                return this.length;
            },
            indexOfKey: function (key) {
                return this.keys.indexOf(key);
            },
            get: function (key) {
                var mk = this.map[key],
                    item = mk !== undefined ? mk : (typeof key == &#x27;number&#x27;) ? this.items[key] : undefined;
                return !$.isFunction(item) || this.allowFunctions ? item : null; // for prototype!
            },
            getAt: function (index) {
                return this.items[index];
            },
            key: function (key) {
                return this.map[key];
            },
            contains: function (o) {
                return this.indexOf(o) != -1;
            },
            containsKey: function (key) {
                return typeof this.map[key] != &#x27;undefined&#x27;;
            },

            clear: function () {
                this.length = 0;
                this.items = [];
                this.keys = [];
                this.map = {};
                this.fireEvent(&#x27;clear&#x27;);
            },


            first: function () {
                return this.items[0];
            },


            last: function () {
                return this.items[this.length - 1];
            },

            sort: function (dir, fn) {
                _sort.call(this, &#x27;value&#x27;, dir, fn);
            },


            keySort: function (dir, fn) {
                _sort.call(this, &#x27;key&#x27;, dir, fn || function (a, b) {
                    var v1 = String(a).toUpperCase(), v2 = String(b).toUpperCase();
                    return v1 &gt; v2 ? 1 : (v1 &lt; v2 ? -1 : 0);
                });
            },


            getRange: function (start, end) {
                var items = this.items;
                if (items.length &lt; 1) {
                    return [];
                }
                start = start || 0;
                end = Math.min(typeof end == &#x27;undefined&#x27; ? this.length - 1 : end, this.length - 1);
                var i, r = [];
                if (start &lt;= end) {
                    for (i = start; i &lt;= end; i++) {
                        r[r.length] = items[i];
                    }
                } else {
                    for (i = start; i &gt;= end; i--) {
                        r[r.length] = items[i];
                    }
                }
                return r;
            },


            filter: function (property, value, anyMatch, caseSensitive) {
                if ($.isEmpty(value, false)) {
                    return this.clone();
                }
                value = this.createValueMatcher(value, anyMatch, caseSensitive);
                return this.filterBy(function (o) {
                    return o &amp;&amp; value.test(o[property]);
                });
            },


            filterBy: function (fn, scope) {
                var r = new this.jstatic();
                r.getKey = this.getKey;
                var k = this.keys, it = this.items;
                for (var i = 0, len = it.length; i &lt; len; i++) {
                    if (fn.call(scope || this, it[i], k[i])) {
                        r.add(k[i], it[i]);
                    }
                }
                return r;
            },


            findIndex: function (property, value, start, anyMatch, caseSensitive) {
                if ($.isEmpty(value, false)) {
                    return -1;
                }
                value = this.createValueMatcher(value, anyMatch, caseSensitive);
                return this.findIndexBy(function (o) {
                    return o &amp;&amp; value.test(o[property]);
                }, null, start);
            },


            findIndexBy: function (fn, scope, start) {
                var k = this.keys, it = this.items;
                for (var i = (start || 0), len = it.length; i &lt; len; i++) {
                    if (fn.call(scope || this, it[i], k[i])) {
                        return i;
                    }
                }
                return -1;
            },

            createValueMatcher: function (value, anyMatch, caseSensitive, exactMatch) {
                if (!value.exec) { // not a regex
                    var er = $.escapeRe;
                    value = String(value);

                    if (anyMatch === true) {
                        value = er(value);
                    } else {
                        value = &#x27;^&#x27; + er(value);
                        if (exactMatch === true) {
                            value += &#x27;$&#x27;;
                        }
                    }
                    value = new RegExp(value, caseSensitive ? &#x27;&#x27; : &#x27;i&#x27;);
                }
                return value;
            },

            clone: function () {
                var r = new this.jstatic();
                var k = this.keys, it = this.items;
                for (var i = 0, len = it.length; i &lt; len; i++) {
                    r.add(k[i], it[i]);
                }
                r.getKey = this.getKey;
                return r;
            }

        });


    });
});
</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
