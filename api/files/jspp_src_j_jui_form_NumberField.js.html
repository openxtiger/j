<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jspp/src/j/jui/form/NumberField.js - The Js++ Language</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png">The Js++ Language: jspp/src/j/jui/form/NumberField.js</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Modules</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../modules/DOM_UNIT.html">DOM_UNIT</a>
                
                </li>
            
                <li><a href="../modules/jui.html">jui</a>
                
                </li>
            
                <li><a href="../modules/junit.html">junit</a>
                
                </li>
            
                <li><a href="../modules/OOP.html">OOP</a>
                
                </li>
            
        </ul>
    </div>
</div>

<div id="classes" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Classes</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../classes/dataview.html">dataview</a></li>
            
                <li><a href="../classes/Jclass.html">Jclass</a></li>
            
                <li><a href="../classes/jde.DataProxy.html">jde.DataProxy</a></li>
            
                <li><a href="../classes/jde.JsonReader.html">jde.JsonReader</a></li>
            
                <li><a href="../classes/JDEngine.html">JDEngine</a></li>
            
                <li><a href="../classes/jdengine.html">jdengine</a></li>
            
                <li><a href="../classes/jsonreader.html">jsonreader</a></li>
            
                <li><a href="../classes/jui.Component.html">jui.Component</a></li>
            
                <li><a href="../classes/jui.DataView.html">jui.DataView</a></li>
            
                <li><a href="../classes/jui.form.Checkbox.html">jui.form.Checkbox</a></li>
            
                <li><a href="../classes/jui.form.ComboBox.html">jui.form.ComboBox</a></li>
            
                <li><a href="../classes/jui.form.Field.html">jui.form.Field</a></li>
            
                <li><a href="../classes/jui.form.Hidden.html">jui.form.Hidden</a></li>
            
                <li><a href="../classes/jui.form.NumberFiled.html">jui.form.NumberFiled</a></li>
            
                <li><a href="../classes/jui.form.Radio.html">jui.form.Radio</a></li>
            
                <li><a href="../classes/jui.form.TextArea.html">jui.form.TextArea</a></li>
            
                <li><a href="../classes/jui.form.TextField.html">jui.form.TextField</a></li>
            
                <li><a href="../classes/jui.form.TriggerField.html">jui.form.TriggerField</a></li>
            
                <li><a href="../classes/jui.form.TwinTriggerField.html">jui.form.TwinTriggerField</a></li>
            
                <li><a href="../classes/jui.Layer.html">jui.Layer</a></li>
            
                <li><a href="../classes/junit.BaseTemplate.html">junit.BaseTemplate</a></li>
            
                <li><a href="../classes/junit.JTemplate.html">junit.JTemplate</a></li>
            
                <li><a href="../classes/junit.MixedCollection.html">junit.MixedCollection</a></li>
            
                <li><a href="../classes/junit.Observable.html">junit.Observable</a></li>
            
                <li><a href="../classes/junit.STemplate.html">junit.STemplate</a></li>
            
                <li><a href="../classes/junit.Template.html">junit.Template</a></li>
            
                <li><a href="../classes/Opp.html">Opp</a></li>
            
        </ul>
    </div>
</div>










<div id="fileTree" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Files</h2>
    </div>
    <div class="bd">
        <ul><li>jspp/<ul><li>src/<ul><li>core/<ul><li><a href="../files/jspp_src_core_j.js.html">j.js</a></li><li><a href="../files/jspp_src_core_oop.js.html">oop.js</a></li></ul></li><li>j/<ul><li>jde/<ul><li><a href="../files/jspp_src_j_jde_DataProxy.js.html">DataProxy.js</a></li><li><a href="../files/jspp_src_j_jde_JDEngine.js.html">JDEngine.js</a></li><li><a href="../files/jspp_src_j_jde_JsonReader.js.html">JsonReader.js</a></li></ul></li><li>jui/<ul><li><a href="../files/jspp_src_j_jui_Component.js.html">Component.js</a></li><li><a href="../files/jspp_src_j_jui_DataView.js.html">DataView.js</a></li><li><a href="../files/jspp_src_j_jui_Layer.js.html">Layer.js</a></li><li>form/<ul><li><a href="../files/jspp_src_j_jui_form_Checkbox.js.html">Checkbox.js</a></li><li><a href="../files/jspp_src_j_jui_form_ComboBox.js.html">ComboBox.js</a></li><li><a href="../files/jspp_src_j_jui_form_Field.js.html">Field.js</a></li><li><a href="../files/jspp_src_j_jui_form_Hidden.js.html">Hidden.js</a></li><li><a href="../files/jspp_src_j_jui_form_NumberField.js.html">NumberField.js</a></li><li><a href="../files/jspp_src_j_jui_form_Radio.js.html">Radio.js</a></li><li><a href="../files/jspp_src_j_jui_form_TextArea.js.html">TextArea.js</a></li><li><a href="../files/jspp_src_j_jui_form_TextField.js.html">TextField.js</a></li><li><a href="../files/jspp_src_j_jui_form_TriggerField.js.html">TriggerField.js</a></li></ul></li></ul></li><li>junit/<ul><li><a href="../files/jspp_src_j_junit_MixedCollection.js.html">MixedCollection.js</a></li><li><a href="../files/jspp_src_j_junit_Observable.js.html">Observable.js</a></li><li><a href="../files/jspp_src_j_junit_Template.js.html">Template.js</a></li><li><a href="../files/jspp_src_j_junit_XTemplate.js.html">XTemplate.js</a></li></ul></li></ul></li></ul></li></ul></li></ul>
    </div>
</div>



        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>jspp/src/j/jui/form/NumberField.js</h4>

<pre class="code prettyprint linenums">
/**
 * @pakcage jui.form
 */
&#x27;package jui.form&#x27;.j(function () {
    /**
     * @class jui.form.NumberFiled
     * @extends jui.form.TextField
     */
    &#x27;class NumberFiled extends TextField&#x27;.j(function () {
        jprotected({
            fieldClass: &quot;j-form-field j-form-num-field&quot;,
            /**
             * @cfg {Boolean} allowDecimals False to disallow decimal values (defaults to true)
             */
            allowDecimals: true,
            /**
             * @cfg {String} decimalSeparator Character(s) to allow as the decimal separator (defaults to &#x27;.&#x27;)
             */
            decimalSeparator: &quot;.&quot;,
            /**
             * @cfg {Number} decimalPrecision The maximum precision to display after the decimal separator (defaults to 2)
             */
            decimalPrecision: 2,
            /**
             * @cfg {Boolean} allowNegative False to prevent entering a negative sign (defaults to true)
             */
            allowNegative: true,
            /**
             * @cfg {Number} minValue The minimum allowed value (defaults to Number.NEGATIVE_INFINITY)
             */
            minValue: Number.NEGATIVE_INFINITY,
            /**
             * @cfg {Number} maxValue The maximum allowed value (defaults to Number.MAX_VALUE)
             */
            maxValue: Number.MAX_VALUE,
            /**
             * @cfg {String} minText Error text to display if the minimum value validation fails (defaults to &quot;The minimum value for this field is {minValue}&quot;)
             */
            minText: &quot;The minimum value for this field is {0}&quot;,
            /**
             * @cfg {String} maxText Error text to display if the maximum value validation fails (defaults to &quot;The maximum value for this field is {maxValue}&quot;)
             */
            maxText: &quot;The maximum value for this field is {0}&quot;,
            /**
             * @cfg {String} nanText Error text to display if the value is not a valid number.  For example, this can happen
             * if a valid character like &#x27;.&#x27; or &#x27;-&#x27; is left in the field with no number (defaults to &quot;{value} is not a valid number&quot;)
             */
            nanText: &quot;{0} is not a valid number&quot;,
            /**
             * @cfg {String} baseChars The base set of characters to evaluate as valid numbers (defaults to &#x27;0123456789&#x27;).
             */
            baseChars: &quot;0123456789&quot;
        });

        jprotected({
            // private
            initEvents: function () {
                var allowed = this.baseChars + &#x27;&#x27;;
                if (this.allowDecimals) {
                    allowed += this.decimalSeparator;
                }
                if (this.allowNegative) {
                    allowed += &#x27;-&#x27;;
                }
                this.maskRe = new RegExp(&#x27;[&#x27; + allowed.replace(/([-.*+?^${}()|[\]\/\\])/g, &quot;\\$1&quot;) + &#x27;]&#x27;);
                jsuper(this);
            },

            // private
            validateValue: function (value) {
                if (!jsuper(this)) {
                    return false;
                }
                if (value.length &lt; 1) { // if it&#x27;s blank and textfield didn&#x27;t flag it then it&#x27;s valid
                    return true;
                }
                value = String(value).replace(this.decimalSeparator, &quot;.&quot;);
                if (isNaN(value)) {
                    this.markInvalid(String.format(this.nanText, value));
                    return false;
                }
                var num = this.parseValue(value);
                if (num &lt; this.minValue) {
                    this.markInvalid(String.format(this.minText, this.minValue));
                    return false;
                }
                if (num &gt; this.maxValue) {
                    this.markInvalid(String.format(this.maxText, this.maxValue));
                    return false;
                }
                return true;
            },

            getValue: function () {
                return this.fixPrecision(this.parseValue(jsuper(this)));
            },

            setValue: function (v) {
                v = $.isNumber(v) ? v : parseFloat(String(v).replace(this.decimalSeparator, &quot;.&quot;));
                v = isNaN(v) ? &#x27;&#x27; : String(v).replace(&quot;.&quot;, this.decimalSeparator);
                return jsuper(this);
            },

            /**
             * Replaces any existing {@link #minValue} with the new value.
             * @param {Number} value The minimum value
             */
            setMinValue: function (value) {
                this.minValue = $.isNumber(value) ? value : Number.NEGATIVE_INFINITY;
            },

            /**
             * Replaces any existing {@link #maxValue} with the new value.
             * @param {Number} value The maximum value
             */
            setMaxValue: function (value) {
                this.maxValue = $.isNumber(value) ? value : Number.MAX_VALUE;
            },

            // private
            parseValue: function (value) {
                value = parseFloat(String(value).replace(this.decimalSeparator, &quot;.&quot;));
                return isNaN(value) ? &#x27;&#x27; : value;
            },

            // private
            fixPrecision: function (value) {
                var nan = isNaN(value);
                if (!this.allowDecimals || this.decimalPrecision == -1 || nan || !value) {
                    return nan ? &#x27;&#x27; : value;
                }
                return parseFloat(parseFloat(value).toFixed(this.decimalPrecision));
            },

            beforeBlur: function () {
                var v = this.parseValue(this.getRawValue());
                if (!$.isEmpty(v)) {
                    this.setValue(this.fixPrecision(v));
                }
            }
        });

    }, &#x27;numberfiled&#x27;);
});
</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
