<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jspp/src/j/jui/Component.js - The Js++ Language</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png">The Js++ Language: jspp/src/j/jui/Component.js</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Modules</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../modules/DOM_UNIT.html">DOM_UNIT</a>
                
                </li>
            
                <li><a href="../modules/jui.html">jui</a>
                
                </li>
            
                <li><a href="../modules/junit.html">junit</a>
                
                </li>
            
                <li><a href="../modules/OOP.html">OOP</a>
                
                </li>
            
        </ul>
    </div>
</div>

<div id="classes" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Classes</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../classes/dataview.html">dataview</a></li>
            
                <li><a href="../classes/Jclass.html">Jclass</a></li>
            
                <li><a href="../classes/jde.DataProxy.html">jde.DataProxy</a></li>
            
                <li><a href="../classes/jde.JsonReader.html">jde.JsonReader</a></li>
            
                <li><a href="../classes/JDEngine.html">JDEngine</a></li>
            
                <li><a href="../classes/jdengine.html">jdengine</a></li>
            
                <li><a href="../classes/jsonreader.html">jsonreader</a></li>
            
                <li><a href="../classes/jui.Component.html">jui.Component</a></li>
            
                <li><a href="../classes/jui.DataView.html">jui.DataView</a></li>
            
                <li><a href="../classes/jui.form.Checkbox.html">jui.form.Checkbox</a></li>
            
                <li><a href="../classes/jui.form.ComboBox.html">jui.form.ComboBox</a></li>
            
                <li><a href="../classes/jui.form.Field.html">jui.form.Field</a></li>
            
                <li><a href="../classes/jui.form.Hidden.html">jui.form.Hidden</a></li>
            
                <li><a href="../classes/jui.form.NumberFiled.html">jui.form.NumberFiled</a></li>
            
                <li><a href="../classes/jui.form.Radio.html">jui.form.Radio</a></li>
            
                <li><a href="../classes/jui.form.TextArea.html">jui.form.TextArea</a></li>
            
                <li><a href="../classes/jui.form.TextField.html">jui.form.TextField</a></li>
            
                <li><a href="../classes/jui.form.TriggerField.html">jui.form.TriggerField</a></li>
            
                <li><a href="../classes/jui.form.TwinTriggerField.html">jui.form.TwinTriggerField</a></li>
            
                <li><a href="../classes/jui.Layer.html">jui.Layer</a></li>
            
                <li><a href="../classes/junit.BaseTemplate.html">junit.BaseTemplate</a></li>
            
                <li><a href="../classes/junit.JTemplate.html">junit.JTemplate</a></li>
            
                <li><a href="../classes/junit.MixedCollection.html">junit.MixedCollection</a></li>
            
                <li><a href="../classes/junit.Observable.html">junit.Observable</a></li>
            
                <li><a href="../classes/junit.STemplate.html">junit.STemplate</a></li>
            
                <li><a href="../classes/junit.Template.html">junit.Template</a></li>
            
                <li><a href="../classes/Opp.html">Opp</a></li>
            
        </ul>
    </div>
</div>










<div id="fileTree" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Files</h2>
    </div>
    <div class="bd">
        <ul><li>jspp/<ul><li>src/<ul><li>core/<ul><li><a href="../files/jspp_src_core_j.js.html">j.js</a></li><li><a href="../files/jspp_src_core_oop.js.html">oop.js</a></li></ul></li><li>j/<ul><li>jde/<ul><li><a href="../files/jspp_src_j_jde_DataProxy.js.html">DataProxy.js</a></li><li><a href="../files/jspp_src_j_jde_JDEngine.js.html">JDEngine.js</a></li><li><a href="../files/jspp_src_j_jde_JsonReader.js.html">JsonReader.js</a></li></ul></li><li>jui/<ul><li><a href="../files/jspp_src_j_jui_Component.js.html">Component.js</a></li><li><a href="../files/jspp_src_j_jui_DataView.js.html">DataView.js</a></li><li><a href="../files/jspp_src_j_jui_Layer.js.html">Layer.js</a></li><li>form/<ul><li><a href="../files/jspp_src_j_jui_form_Checkbox.js.html">Checkbox.js</a></li><li><a href="../files/jspp_src_j_jui_form_ComboBox.js.html">ComboBox.js</a></li><li><a href="../files/jspp_src_j_jui_form_Field.js.html">Field.js</a></li><li><a href="../files/jspp_src_j_jui_form_Hidden.js.html">Hidden.js</a></li><li><a href="../files/jspp_src_j_jui_form_NumberField.js.html">NumberField.js</a></li><li><a href="../files/jspp_src_j_jui_form_Radio.js.html">Radio.js</a></li><li><a href="../files/jspp_src_j_jui_form_TextArea.js.html">TextArea.js</a></li><li><a href="../files/jspp_src_j_jui_form_TextField.js.html">TextField.js</a></li><li><a href="../files/jspp_src_j_jui_form_TriggerField.js.html">TriggerField.js</a></li></ul></li></ul></li><li>junit/<ul><li><a href="../files/jspp_src_j_junit_MixedCollection.js.html">MixedCollection.js</a></li><li><a href="../files/jspp_src_j_junit_Observable.js.html">Observable.js</a></li><li><a href="../files/jspp_src_j_junit_Template.js.html">Template.js</a></li><li><a href="../files/jspp_src_j_junit_XTemplate.js.html">XTemplate.js</a></li></ul></li></ul></li></ul></li></ul></li></ul>
    </div>
</div>



        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>jspp/src/j/jui/Component.js</h4>

<pre class="code prettyprint linenums">
/**
 * @pakcage jui
 * @module jui
 */
&#x27;package jui&#x27;.j(function () {

    /**
     * @class jui.Component
     * @extends junit.Observable
     */
    &#x27;class Component implements junit.Observable&#x27;.j(function (csuper, cob) {
        jstatic({
            AUTO_ID: 1000
        });

        // project
        jprotected({
            getId: function () {
                return this.id || (this.id = &#x27;jc-&#x27; + ++(jstatic().AUTO_ID));
            }
        });
        // publc vars
        jpublic({
            disabled: false,
            hidden: false,

            disabledClass: &#x27;j-item-disabled&#x27;,

            allowDomMove: true,
            autoShow: false,
            hideMode: &#x27;display&#x27;,
            hideParent: false,
            rendered: false,
            tplWriteMode: &#x27;overwrite&#x27;,

            autoEl: &#x27;div&#x27;,

            actionMode: &#x27;el&#x27;,
            boxReady: false,
            deferHeight: false
        });
        jprotected({
            getAutoCreate: function () {
                var cfg = $.isObject(this.autoCreate) ?
                    this.autoCreate : $.extend({}, this.defaultAutoCreate);
                if (this.id &amp;&amp; !cfg.id) {
                    cfg.id = this.id;
                }
                return cfg;
            }
        });
        // publc method
        jpublic({
            constructor: function (config) {
                config = config || {};
                this.initialConfig = config;
                $.extend(this, config);
                jcall(cob, this);

                $.widget(this.getId(), this);


                this.initComponent();
                if (this.owner) {
                    this.render(this.owner);
                    delete this.owner;
                } else if (this.applyTo) {
                    this.applyToMarkup(this.applyTo);
                    delete this.applyTo;
                } else if (this.renderTo) {
                    this.render(this.renderTo);
                    delete this.renderTo;
                }
            },
            getActionEl: function () {
                return this[this.actionMode];
            },
            applyToMarkup: function (el) {
                this.allowDomMove = false;
                this.el = $.get(el);
                this.render(this.el.dom().parentNode);
            },
            initComponent: $.noop,
            afterRender: $.noop,
            render: function (container, position) {
                if (!this.rendered &amp;&amp; this.fireEvent(&#x27;beforerender&#x27;, this) !== false) {
                    if (!container &amp;&amp; this.el) {
                        this.el = $.get(this.el);
                        container = this.el.dom().parentNode;
                        this.allowDomMove = false;
                    }
                    this.container = $.get(container);
                    if (this.ctCls) {
                        this.container.addClass(this.ctCls);
                    }
                    this.rendered = true;
                    if (position !== undefined) {
                        if ($.isNumber(position)) {
                            position = this.container.dom.childNodes[position];
                        } else {
                            position = $.dom(position);
                        }
                    }
                    this.onRender(this.container, position || null);
                    if (this.autoShow) {
                        this.el.removeClass([&#x27;x-hidden&#x27;, &#x27;x-hide-&#x27; + this.hideMode]);
                    }
                    if (this.cls) {
                        this.el.addClass(this.cls);
                        delete this.cls;
                    }
                    if (this.style) {
                        this.el.css(this.style, true);
                        delete this.style;
                    }
                    if (this.overCls) {
                        this.el.addClassOnOver(this.overCls);
                    }
                    this.fireEvent(&#x27;render&#x27;, this);


                    // Populate content of the component with html, contentEl or
                    // a tpl.
                    var contentTarget = this.getContentTarget();
                    if (this.html) {
                        contentTarget.html(this.html);
                        delete this.html;
                    }
                    if (this.contentEl) {
                        var ce = $.dom(this.contentEl);
                        $(ce).removeClass([&#x27;x-hidden&#x27;, &#x27;x-hide-display&#x27;]);
                        contentTarget.appendChild(ce);
                    }
                    if (this.tpl) {
                        if (!this.tpl.compile) {
                            this.tpl = $.tpl(this.tpl);
                        }
                        if (this.data) {
                            this.tpl[this.tplWriteMode](contentTarget, this.data);
                            delete this.data;
                        }
                    }
                    this.afterRender(this.container);

                    this.boxReady = true;

                    this.setSize(this.width, this.height);
                    if (this.x || this.y) {
                        this.setPosition(this.x, this.y);
                    } else if (this.pageX || this.pageY) {
                        this.setPagePosition(this.pageX, this.pageY);
                    }

                    if (this.hidden) {
                        // call this so we don&#x27;t fire initial hide events.
                        this.doHide();
                    }
                    if (this.disabled) {
                        // pass silent so the event doesn&#x27;t fire the first time.
                        this.disable(true);
                    }

                    /*if (this.stateful !== false) {
                     this.initStateEvents();
                     }*/

                    this.fireEvent(&#x27;afterrender&#x27;, this);
                }
                return this;
            },
            onRender: function (ct, position) {
                if (!this.el &amp;&amp; this.autoEl) {
                    if ($.isString(this.autoEl)) {
                        this.el = document.createElement(this.autoEl);
                    } else {
                        var div = document.createElement(&#x27;div&#x27;);
                        $.overwrite(div, this.autoEl);
                        this.el = div.firstChild;
                    }
                    if (!this.el.id) {
                        this.el.id = this.getId();
                    }
                }
                if (this.el) {
                    this.el = $.get(this.el);
                    if (this.allowDomMove !== false) {
                        ct.dom().insertBefore(this.el.dom(), position);
                        if (div) {
                            $.remove(div);
                            div = null;
                        }
                    }
                }
            },
            destroy: function () {
                if (!this.isDestroyed) {
                    if (this.fireEvent(&#x27;beforedestroy&#x27;, this) !== false) {
                        this.destroying = true;
                        this.beforeDestroy();
                        if (this.ownerCt &amp;&amp; this.ownerCt.remove) {
                            this.ownerCt.remove(this, false);
                        }
                        if (this.rendered) {
                            this.el.remove();
                            if (this.actionMode == &#x27;container&#x27; || this.removeMode == &#x27;container&#x27;) {
                                this.container.remove();
                            }
                        }
                        // Stop any buffered tasks
                        if (this.focusTask &amp;&amp; this.focusTask.cancel) {
                            this.focusTask.cancel();
                        }
                        this.onDestroy();
                        jui.ComponentMgr.unregister(this);
                        this.fireEvent(&#x27;destroy&#x27;, this);
                        this.purgeListeners();
                        this.destroying = false;
                        this.isDestroyed = true;
                    }
                }
            },
            beforeDestroy: $.noop,
            onDestroy: $.noop,
            getEl: function () {
                return this.el;
            },
            getPositionEl: function () {
                return this.positionEl || this.el;
            },
            // private
            getContentTarget: function () {
                return this.el;
            },
            focus: function (selectText, delay) {
                /*if (delay) {
                 this.focusTask = new jutil.DelayedTask(this.focus, this, [selectText, false]);
                 this.focusTask.delay($.isNumber(delay) ? delay : 10);
                 return this;
                 }*/
                if (this.rendered &amp;&amp; !this.isDestroyed) {
                    this.el.focus();
                    if (selectText === true) {
                        this.el.dom.select();
                    }
                }
                return this;
            },

            // private
            blur: function () {
                if (this.rendered) {
                    this.el.blur();
                }
                return this;
            },

            disable: function (/* private */ silent) {
                if (this.rendered) {
                    this.onDisable();
                }
                this.disabled = true;
                if (silent !== true) {
                    this.fireEvent(&#x27;disable&#x27;, this);
                }
                return this;
            },

            // private
            onDisable: function () {
                this.getActionEl().addClass(this.disabledClass);
                this.el.dom().disabled = true;
            },

            enable: function () {
                if (this.rendered) {
                    this.onEnable();
                }
                this.disabled = false;
                this.fireEvent(&#x27;enable&#x27;, this);
                return this;
            },

            // private
            onEnable: function () {
                this.getActionEl().removeClass(this.disabledClass);
                this.el.dom().disabled = false;
            },

            setDisabled: function (disabled) {
                return this[disabled ? &#x27;disable&#x27; : &#x27;enable&#x27;]();
            },

            show: function () {
                if (this.fireEvent(&#x27;beforeshow&#x27;, this) !== false) {
                    this.hidden = false;
                    if (this.autoRender) {
                        this.render($.isBoolean(this.autoRender) ? $.getBody() : this.autoRender);
                    }
                    if (this.rendered) {
                        this.onShow();
                    }
                    this.fireEvent(&#x27;show&#x27;, this);
                }
                return this;
            },

            // private
            onShow: function () {
                this.getVisibilityEl().removeClass(&#x27;x-hide-&#x27; + this.hideMode);
            },

            hide: function () {
                if (this.fireEvent(&#x27;beforehide&#x27;, this) !== false) {
                    this.doHide();
                    this.fireEvent(&#x27;hide&#x27;, this);
                }
                return this;
            },

            // private
            doHide: function () {
                this.hidden = true;
                if (this.rendered) {
                    this.onHide();
                }
            },

            // private
            onHide: function () {
                this.getVisibilityEl().addClass(&#x27;x-hide-&#x27; + this.hideMode);
            },

            // private
            getVisibilityEl: function () {
                return this.hideParent ? this.container : this.getActionEl();
            },

            setVisible: function (visible) {
                return this[visible ? &#x27;show&#x27; : &#x27;hide&#x27;]();
            },

            isVisible: function () {
                return this.rendered &amp;&amp; this.getVisibilityEl().isVisible();
            },

            setSize: function (w, h) {

                // support for standard size objects
                if (typeof w == &#x27;object&#x27;) {
                    h = w.height;
                    w = w.width;
                }
                if ($.isDefined(w) &amp;&amp; $.isDefined(this.boxMinWidth) &amp;&amp; (w &lt; this.boxMinWidth)) {
                    w = this.boxMinWidth;
                }
                if ($.isDefined(h) &amp;&amp; $.isDefined(this.boxMinHeight) &amp;&amp; (h &lt; this.boxMinHeight)) {
                    h = this.boxMinHeight;
                }
                if ($.isDefined(w) &amp;&amp; $.isDefined(this.boxMaxWidth) &amp;&amp; (w &gt; this.boxMaxWidth)) {
                    w = this.boxMaxWidth;
                }
                if ($.isDefined(h) &amp;&amp; $.isDefined(this.boxMaxHeight) &amp;&amp; (h &gt; this.boxMaxHeight)) {
                    h = this.boxMaxHeight;
                }
                // not rendered
                if (!this.boxReady) {
                    this.width = w;
                    this.height = h;
                    return this;
                }

                // prevent recalcs when not needed
                if (this.cacheSizes !== false &amp;&amp; this.lastSize &amp;&amp; this.lastSize.width == w &amp;&amp; this.lastSize.height == h) {
                    return this;
                }
                this.lastSize = {width: w, height: h};
                var adj = this.adjustSize(w, h),
                    aw = adj.width,
                    ah = adj.height,
                    rz;
                if (aw !== undefined || ah !== undefined) { // this code is nasty but performs better with floaters
                    rz = this.getResizeEl();
                    if (!this.deferHeight &amp;&amp; aw !== undefined &amp;&amp; ah !== undefined) {
                        rz.size(aw, ah);
                    } else if (!this.deferHeight &amp;&amp; ah !== undefined) {
                        rz.height(ah);
                    } else if (aw !== undefined) {
                        rz.width(aw);
                    }
                    this.onResize(aw, ah, w, h);
                    this.fireEvent(&#x27;resize&#x27;, this, aw, ah, w, h);
                }
                return this;
            },
            setWidth: function (width) {
                return this.setSize(width);
            },
            setHeight: function (height) {
                return this.setSize(undefined, height);
            },
            getSize: function () {
                return this.getResizeEl().getSize();
            },
            getWidth: function () {
                return this.getResizeEl().getWidth();
            },
            getHeight: function () {
                return this.getResizeEl().getHeight();
            },
            getPosition: function (local) {
                var el = this.getPositionEl();
                if (local === true) {
                    return [el.getLeft(true), el.getTop(true)];
                }
                return this.xy || el.getXY();
            },
            getBox: function (local) {
                var pos = this.getPosition(local);
                var s = this.getSize();
                s.x = pos[0];
                s.y = pos[1];
                return s;
            },
            updateBox: function (box) {
                this.setSize(box.width, box.height);
                this.setPagePosition(box.x, box.y);
                return this;
            },
            getResizeEl: function () {
                return this.resizeEl || this.el;
            },
            setAutoScroll: function (scroll) {
                if (this.rendered) {
                    this.getContentTarget().setOverflow(scroll ? &#x27;auto&#x27; : &#x27;&#x27;);
                }
                this.autoScroll = scroll;
                return this;
            },
            setPosition: function (x, y) {
                if (x &amp;&amp; typeof x[1] == &#x27;number&#x27;) {
                    y = x[1];
                    x = x[0];
                }
                this.x = x;
                this.y = y;
                if (!this.boxReady) {
                    return this;
                }
                var adj = this.adjustPosition(x, y);
                var ax = adj.x, ay = adj.y;

                var el = this.getPositionEl();
                if (ax !== undefined || ay !== undefined) {
                    if (ax !== undefined &amp;&amp; ay !== undefined) {
                        el.setLeftTop(ax, ay);
                    } else if (ax !== undefined) {
                        el.setLeft(ax);
                    } else if (ay !== undefined) {
                        el.setTop(ay);
                    }
                    this.onPosition(ax, ay);
                    this.fireEvent(&#x27;move&#x27;, this, ax, ay);
                }
                return this;
            },
            setPagePosition: function (x, y) {
                if (x &amp;&amp; typeof x[1] == &#x27;number&#x27;) {
                    y = x[1];
                    x = x[0];
                }
                this.pageX = x;
                this.pageY = y;
                if (!this.boxReady) {
                    return null;
                }
                if (x === undefined || y === undefined) { // cannot translate undefined points
                    return null;
                }
                var p = this.getPositionEl().translatePoints(x, y);
                this.setPosition(p.left, p.top);
                return this;
            },
            adjustSize: function (w, h) {
                if (this.autoWidth) {
                    w = &#x27;auto&#x27;;
                }
                if (this.autoHeight) {
                    h = &#x27;auto&#x27;;
                }
                return {width: w, height: h};
            },
            onResize: function (adjWidth, adjHeight, rawWidth, rawHeight) {
            },

            onPosition: function (x, y) {

            },
            // private
            adjustPosition: function (x, y) {
                return {x: x, y: y};
            }
        });

    }, &#x27;component&#x27;);

});
</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
