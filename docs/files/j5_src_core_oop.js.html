<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>j5&#x2F;src&#x2F;core&#x2F;oop.js - The J API</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="The J API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 5.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/..html">.</a></li>
            
                <li><a href="..&#x2F;classes/J.html">J</a></li>
            
                <li><a href="..&#x2F;classes/j.unit.Observable.html">j.unit.Observable</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: j5&#x2F;src&#x2F;core&#x2F;oop.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * The J module contains the components required for building the J seed file.
 * opp for the library.
 * @main j
 *&#x2F;

var __cpackage__;
var __npackage__;
var __gclasses__ = {};
var __iclasses__ = {};
var __imports__ = [];
var __importcs__ = {};

&#x2F;**
 * The J global namespace object. This is the constructor for all J instances.
 * @class J
 * @constructor
 * @global
 * @param {Object} [selector] * Zero or more optional selector objects
 * @param {Object} [context] * Zero or more optional context objects
 * @return
 * * when zero param return J.prototype
 *&#x2F;
var J = (function() {
    var J,JF,toString = Object.prototype.toString,
        oc = Object.prototype.constructor,
        apush = Array.prototype.push,
        aslice = Array.prototype.slice,
        class2type = {},
        enumerables = [&#x27;hasOwnProperty&#x27;, &#x27;valueOf&#x27;, &#x27;isPrototypeOf&#x27;, &#x27;propertyIsEnumerable&#x27;, &#x27;toLocaleString&#x27;,
            &#x27;toString&#x27;, &#x27;constructor&#x27;],
        objs = &quot;Boolean Number String Function Array Date RegExp&quot;.split(&quot; &quot;);
    for (var i = 0,l = objs.length; i &lt; l; i++) {
        class2type[ &quot;[object &quot; + objs[i] + &quot;]&quot; ] = objs[i].toLowerCase();
    }

    Function.prototype.setter = function() {
        var jthis = this;
        return function(a, b) {
            if (a == null) return this;
            if (typeof a != &#x27;string&#x27;) {
                for (var k in a) jthis.call(this, k, a[k]);
                if (enumerables) {
                    for (var i = enumerables.length; i--;) {
                        k = enumerables[i];
                        if (a.hasOwnProperty(k)) jthis.call(this, k, a[k]);
                    }
                }
            } else {
                jthis.call(this, a, b);
            }
            return this;
        };
    };

    Function.prototype.getter = function() {
        var jthis = this;
        return function(a) {
            var args, result;
            if (typeof a != &#x27;string&#x27;) args = a;
            else if (arguments.length &gt; 1) args = arguments;
            if (args) {
                result = {};
                for (var i = 0; i &lt; args.length; i++)
                    result[args[i]] = jthis.call(this, args[i]);
            } else {
                result = jthis.call(this, a);
            }
            return result;
        };
    };

    function Jclass(selector, context) {
        if (!selector) {
            return this;
        }
        if (selector.nodeType) {
            this[0] = selector;
            this.length = 1;
            return this;
        }
        if (typeof selector === &quot;string&quot;) {
            var rs = (context || document).querySelectorAll(selector);
            return J.merge(this, rs);


        } else if (J.isFunction(selector)) {
            return J.ready(selector);
        }

        return J.merge(this, selector);

    }


    J = function(selector, context) {
        if (arguments.length == 0) {
            return Jclass.prototype;
        }
        if (selector &amp;&amp; selector.nodeType) {
            JF[0] = selector;
            return JF;
        }
        return new Jclass(selector, context);
    };

    JF = new Jclass(null);
    JF.length = 1;

    &#x2F;**
     * @method extend
     * @static
     *&#x2F;
    &#x2F;**
     * @method extend
     *&#x2F;
    J.extend = J().extend = function(key, value) {
        this[key] = value;
    }.setter();

    J.extend({
        &#x2F;**
         * @method mixin
         * @static
         * @param o
         * @param c
         *&#x2F;
        mixin :function(o, c) {
            if (o &amp;&amp; c &amp;&amp; typeof c == &#x27;object&#x27;) {
                for (var p in c) {
                    o[p] = c[p];
                }
            }
            return o;
        },
        &#x2F;**
         * @method mixinIf
         * @static
         * @param o
         * @param c
         *&#x2F;
        mixinIf : function(o, c) {
            if (o) {
                for (var p in c) {
                    if (!J.isDefined(o[p])) {
                        o[p] = c[p];
                    }
                }
            }
            return o;
        },
        &#x2F;**
         * @method override
         * @static
         * @param origclass
         * @param overrides
         *&#x2F;
        override: function(origclass, overrides) {
            if (overrides) {
                var p = origclass.prototype;
                J.mixin(p, overrides);
            }
        },
        &#x2F;**
         * @method merge
         * @static
         * @param first
         * @param second
         *&#x2F;
        merge: function(first, second) {
            if (!second || !first) return;

            var l = second.length,
                i = first.length,
                j = 0;

            if (typeof l === &quot;number&quot;) {
                for (; j &lt; l; j++) {
                    first[ i++ ] = second[ j ];
                }

            } else {
                while (second[j] !== undefined) {
                    first[ i++ ] = second[ j++ ];
                }
            }
            first.length = i;
            return first;
        },
        &#x2F;**
         * @method get
         * @static
         * @param el
         *&#x2F;
        get:function(el) {
            var elm;
            if (!el) {
                return null;
            }
            if (J.isString(el)) { &#x2F;&#x2F; element id
                if (!(elm = document.getElementById(el))) {
                    return null;
                }
                return new Jclass(elm);

            } else if (el.tagName) { &#x2F;&#x2F; dom element
                return new Jclass(el);
            } else if (el instanceof Jclass) {
                return el;
            }
            return null;
        },
        &#x2F;**
         * @method dom
         * @static
         * @param el
         *&#x2F;
        dom:function(el) {
            if (!el) {
                return null;
            }
            if (el.dom &amp;&amp; el.dom()) {
                return el.dom();
            } else {
                if (J.isString(el)) {
                    return document.getElementById(el);
                } else {
                    return el;
                }
            }
        },
        &#x2F;**
         * @method isFunction
         * @static
         * @param v
         *&#x2F;
        isFunction : function(v) {
            return J.type(v) === &#x27;function&#x27;;
        },
        isString : function(v) {
            return J.type(v) === &#x27;string&#x27;;
        },
        isBoolean : function(v) {
            return J.type(v) === &#x27;boolean&#x27;;
        },
        isElement : function(v) {
            return !!v &amp;&amp; v.tagName;
        },
        isDefined : function(v) {
            return typeof v !== &#x27;undefined&#x27;;
        },
        isObject : function(v) {
            return !!v &amp;&amp; J.type(v) === &#x27;object&#x27;;
        },
        isDate : function(v) {
            return J.type(v) === &#x27;date&#x27;;
        },
        isPrimitive : function(v) {
            return J.isString(v) || J.isNumber(v) || J.isBoolean(v);
        },
        isNumber : function(v) {
            return J.type(v) === &#x27;number&#x27;;
        },
        isEmpty : function(v, allowBlank) {
            return v === null || v === undefined || ((J.isArray(v) &amp;&amp; !v.length)) || (!allowBlank ? v === &#x27;&#x27; : false);
        },
        isArray :  Array.isArray || function(v) {
            return J.type(v) === &quot;array&quot;;
        },
        noop: function() {
        },
        isIterable : function(v) {
            &#x2F;&#x2F;check for array or arguments
            if (J.isArray(v) || v.callee) {
                return true;
            }
            &#x2F;&#x2F;check for node list type
            if (&#x2F;NodeList|HTMLCollection&#x2F;.test(toString.call(v))) {
                return true;
            }
            &#x2F;&#x2F;NodeList has an item and length property
            &#x2F;&#x2F;IXMLDOMNodeList has nextNode method, needs to be checked first.
            return ((typeof v.nextNode != &#x27;undefined&#x27; || v.item) &amp;&amp; J.isNumber(v.length));
        },
        type: function(obj) {
            return class2type[ toString.call(obj) ] || &quot;object&quot;;
        },

        ready:function() {

        },
        each : function(obj, fn, scope) {
            if (J.isEmpty(obj, true)) {
                return obj;
            }
            var name;

            if (obj.length === undefined &amp;&amp; J.isObject(obj)) {
                for (name in obj) {
                    if (fn.call(scope || obj, name, obj[ name ]) === false) {
                        break;
                    }
                }
                return obj;
            }

            for (var i = 0,len = obj.length; i &lt; len; i++) {
                if (fn.call(scope || obj[i], obj[i], i, obj) === false) {
                    return i;
                }
            }
            return obj;
        },
        toArray : function(array, start, end) {
            return aslice.call(array, start || 0, end || array.length);
        },
        namespace : function() {
            var o, d;
            J.each(arguments, function(v) {
                d = v.split(&quot;.&quot;);
                o = window[d[0]] = window[d[0]] || {};
                J.each(d.slice(1), function(v2) {
                    o = o[v2] = o[v2] || {};
                });
            });
            return o;
        },
        nameclass:function(c) {
            if (__gclasses__[c]) return __gclasses__[c];
            var d = c.split(&quot;.&quot;);
            var o = window[d[0]] = window[d[0]] || {};
            J.each(d.slice(1, d.length - 1), function(v2) {
                o = o[v2] = o[v2] || {};
            });
            return __gclasses__[c] = o[d[d.length - 1]];
        },
        importclass:function(c) {
            if (__gclasses__[c]) return __gclasses__[c];
            if (__iclasses__[c]) return __iclasses__[c];
            if (__importcs__[c]) return __importcs__[c];

            var d = c.split(&quot;.&quot;);
            var o = window[d[0]] = window[d[0]] || {};
            var name = d[d.length - 1];
            J.each(d.slice(1, d.length - 1), function(v2) {
                o = o[v2] = o[v2] || {};
            });
            if (o[name]) {
                o = __gclasses__[c] = o[name];
            } else {

                J.each(__imports__, function(i) {
                    if ((o = i[name])) {
                        return false;
                    }
                });

                __iclasses__[c] = o;
            }

            return o;
        }

    });

    J().extend({
        &#x2F;**
         * @property {Integer} length
         *&#x2F;
        length: 0,
        &#x2F;**
         * @method create
         * @param elems
         *&#x2F;
        create:function(elems) {
            var ret = J.merge(J(null), elems || []);
            ret.prevJ = this;
            return ret;
        },
        dom: function(num) {
            return this.length == 0 ? null : num &lt; 0 ? this[ this.length + num ] : this[ num || 0 ];
        },
        get: function(i) {
            i = +i;
            return i === -1 ?
                this.slice(i) :
                this.slice(i, i + 1);
        },
        first: function() {
            return this.get(0);
        },

        last: function() {
            return this.get(-1);
        },

        slice: function() {
            return this.create(aslice.apply(this, arguments));
        },

        each: function(callback) {
            for (var i = 0,len = this.length; i &lt; len; i++) {
                if (callback.call(this[i], this[i], i, this) === false) {
                    return i;
                }
            }
            return this;
        },

        back:function() {
            return this.prevJ || J(null);
        },

        query:function(selector) {
            var elem;
            var ret = this.create();
            var rs,r;

            for (var i = 0,l = this.length; i &lt; l; i++) {
                elem = this[i];
                rs = elem.querySelectorAll(selector);
                J.merge(ret, rs);
            }
            for (var n = 0; n &lt; ret.length; n++) {
                for (r = 0; r &lt; ret.length; r++) {
                    if (r !== n &amp;&amp; ret[r] === ret[n]) {
                        ret.splice(n--, 1);
                        break;
                    }
                }
            }
            return ret;
        },
        push: apush,
        sort: [].sort,
        splice: [].splice
    });

    J.prototype = Jclass.prototype;
    J.prototype.constructor = Jclass;

    return J;
})();

&#x2F;**
 *
 * @class .
 *&#x2F;

&#x2F;**
 * @method jpackage
 * @global
 * @param {String} p1  package name
 * @param {String|Object} p2..p-1  imports
 * @param {Function} p-1 package body
 *&#x2F;
function jpackage() {
    var l = arguments.length,i = 0;
    if (l == 0) return;
    var pkf = arguments[l - 1];
    pkf.$Define = true;

    if (J.isString(arguments[0])) {
        __cpackage__ = J.namespace(arguments[0]);
        __npackage__ = arguments[0];
        i = 1;
    } else {
        __cpackage__ = window;
        __npackage__ = &#x27;&#x27;;
        i = 0;
    }
    var args = [],vs,ip;
    J.each(J.toArray(arguments, i, l - 1), function(v) {
        if (J.isString(v)) {
            vs = v.split(&quot;;&quot;);
            J.each(vs, function(v2) {
                if (v2.substr(-2) == &quot;.*&quot;) {
                    ip = J.namespace(v2.substring(0, v2.length - 2));
                    __imports__.push(ip);
                    args.push(ip);
                } else {
                    args.push(J.importclass(v2));
                }
            });
        } else if (J.isArray(v)) {
            args = args.concat(v);
        } else {
            args.push(v);
        }
    });
    pkf.apply(__cpackage__, args);

    __cpackage__ = null;
    __npackage__ = &#x27;&#x27;;
    __imports__ = [];
    __iclasses__ = {};

}

function jimport() {
    var args = [],vs,ip;
    __imports__ = [];
    __iclasses__ = {};
    if (jimport.caller) {
        jimport.caller.$Define = true;
    }
    J.each(arguments, function(v) {
        if (J.isString(v)) {
            vs = v.split(&quot;;&quot;);
            J.each(vs, function(v2) {
                if (!v2) return;
                if (v2.substr(-2) == &quot;.*&quot;) {
                    ip = J.namespace(v2.substring(0, v2.length - 2));
                    __imports__.push(ip);
                    args.push(ip);
                } else {
                    ip = J.importclass(v2);
                    args.push(ip);
                    __importcs__[ip.shortname] = ip;
                }
            });
        } else if (J.isArray(v)) {
            args = args.concat(v);
        } else {
            args.push(v);
        }
    });
    return args;
}

function jextends() {

    var oc = Object.prototype.constructor;
    var l = arguments.length;
    var sb = arguments[0];
    var sp = arguments[1];
    var mixins = [];
    var coverrides;
    if (l &lt; 2) {
        throw new Error(&quot;[jextends] invalid arguments&quot;);
    }
    if (l == 2) {
        coverrides = sp;
        sp = sb;
    } else if (J.isArray(arguments[2])) {
        mixins = arguments[2];
        coverrides = sp;
        sp = sb;
        l = 2;
    } else {
        coverrides = arguments[2];
        if (l == 4) {
            mixins = arguments[3];
        }
    }
    if (J.isString(sp)) {
        sp = J.importclass(sp);
    }

    var JClass = function() {
    };

    var sbp,spp = JClass.prototype = sp.prototype;

    if (J.isFunction(coverrides)) {
        coverrides.$Define = true;
        coverrides = coverrides.apply(this, [spp].concat(mixins));
    }

    if (l == 2) {
        sb = coverrides.constructor != oc ? coverrides.constructor : function() {
            sp.apply(this, arguments);
        };
    }

    sbp = sb.prototype = new JClass();
    sbp.constructor = sb;
    sbp.superclass = sb.superclass = spp;

    if (spp.constructor == oc) {
        spp.constructor = sp;
    }

    if (coverrides.jstatic) {
        J.mixin(sb, coverrides.jstatic);
        delete coverrides.jstatic;
    }

    J.override(sb, coverrides);  &#x2F;&#x2F; extend coverrides

    if (mixins.length) {
        for (var i = 0,len = mixins.length; i &lt; len; i++) {
            J.mixinIf(sbp, mixins[i]);
        }
    }

    return sb;
}


function joverride(origclass, overrides) {
    if (J.isString(origclass)) {
        origclass = jclass(origclass);
    }
    if (!origclass) {
        throw new Error(&quot;[joverride] unrecognized orig class&quot;);
    }
    if (overrides) {
        var op = origclass.prototype;
        if (J.isFunction(overrides)) {
            overrides = overrides.apply(this);
        }

        J.mixin(op, overrides);

        &#x2F;*if (J.isIE &amp;&amp; overrides.hasOwnProperty(&#x27;toString&#x27;)) {
         p.toString = overrides.toString;
         }*&#x2F;
    }

}

&#x2F;**
 * p1:String ==&gt;class name
 * p2,String ==&gt;same package;Object
 * p3,function ==&gt;
 *&#x2F;
function jclass() {
    var l = arguments.length,i = 0;
    if (l == 0) {
        throw new Error(&quot;[jclass] invalid arguments&quot;);
    }
    if (!J.isString(arguments[0])) {
        throw new Error(&quot;[jclass] class name must be string&quot;);
    }
    if (l == 1) {
        return jclass.caller &amp;&amp; jclass.caller.$Define ? __cpackage__ &amp;&amp; __cpackage__[name] ||
            J.importclass(arguments[0]) : J.nameclass(arguments[0]);
    }

    var clf = arguments[l - 1];


    var p;
    if (l &gt;= 3) {
        var name = arguments[1];
        if (J.isString(name)) {
            p = __cpackage__ &amp;&amp; __cpackage__[name] || J.importclass(name);
        } else {
            p = arguments[1];
        }
    } else {
        p = Object;
    }
    if (!p) {
        throw new Error(&quot;[jclass] unrecognized parent class&quot;);
    }
    var mixins = [];

    if (l &gt;= 4) {
        var vs;
        var mc;
        J.each(J.toArray(arguments, 2, l - 1), function(v) {
            if (J.isString(v)) {
                vs = v.split(&quot;,&quot;);
                J.each(vs, function(v2) {
                    mc = J.importclass(v2);
                    if (mc) {
                        mixins.push(mc.prototype);
                    }

                });

            } else {
                mixins.push(v.prototype);
            }
        });
    }

    var cls = jextends(p, clf, mixins);


    if (arguments[0]) {
        cls.shortname = arguments[0];
        cls.classname = __npackage__ ? __npackage__ + &quot;.&quot; + arguments[0] : arguments[0];
        __cpackage__[arguments[0]] = cls;
    }

    return cls;
}

function jnew() {
    var l = arguments.length,i = 0;
    if (l == 0) return {};

    var args = J.toArray(arguments, 1);

    var name = arguments[0];

    var cls;
    if (J.isString(name)) {

        cls = jnew.caller &amp;&amp; jnew.caller.$Define ?
            __cpackage__ &amp;&amp; __cpackage__[name]
                || J.importclass(name) : J.nameclass(name);

        if (!cls) {
            throw new Error(&quot;[jnew] unrecognized class,use whole class name&quot;);
        }
    } else {
        cls = name;
    }

    if (l == 2) {
        return new cls(arguments[1]);
    }

    var c = cls.prototype.constructor;
    var constructor = function() {
        return c.apply(this, args);
    };

    constructor.prototype = cls.prototype;
    constructor.prototype.constructor = c;

    return new constructor();
}


String.prototype.j = function() {
    var def, code;
    def = this.toString();

    if (arguments.length == 1) {
        code = arguments[0];
    }
    if (J.isArray(def)) {
        def = def.join(&#x27; &#x27;);
    }
    var defs = def.replace(&#x2F;\s{1,}&#x2F;g, &#x27; &#x27;).split(&#x2F;\s&#x2F;);
    var l = defs.length;
    if (l % 2 != 0) {
        throw new Error(&quot;[j] def error&quot;);
    }
    var args = [];
    for (var i = 0; i &lt; l; i += 2) {
        switch (defs[i]) {
            case &quot;package&quot;:
                return jpackage.call(this, defs[i + 1], code);
            case &quot;import&quot;:
                return jimport.call(this, defs[i + 1]);
            case &quot;class&quot;:
                args[0] = defs[i + 1];
                break;
            case &quot;extends&quot;:
                args[1] = defs[i + 1];
                break;
            case &quot;implements&quot;:
                args = args.concat(defs[i + 1].replace(&#x2F;\s&#x2F;).split(&quot;,&quot;));
                break;
        }
    }
    args.push(code);

    return jclass.apply(this, args);
};

function jsupercall(cls, method, args) {
    var sp = J.isString(cls) ? jsupercall.caller &amp;&amp; jsupercall.caller.$Define ? J.importclass(cls) : J.nameclass(cls) : cls;
    return sp.superclass[method].apply(this, args);
}

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
